{% extends "form.njk" %}

{% block fieldset %}
  {% for post in posts %}
    {%- set propertiesHtml %}<dl>{% for name, value in post -%}
    {% if (name != "name") and (name != "url") and (name != "content") and (name != "published") %}
      <dt><code class="property">{{ name }}</code></dt>
      <dd>{{ value }}</dd>
    {% endif %}
    {%- endfor %}</dl>{% endset -%}
    {%- set name %}{{ icon(post["post-type"]) }} {{ post.name }}{% endset -%}
    {{ summary({
      title: name,
      actions: [
        {
          href: post.url,
          text: "View",
          visuallyHiddenText: post.name
        }
      ],
      rows: [{
        key: {
          text: "Published"
        },
        value: {
          text: (post.published | date("PPPp", application.locale))
        }
      } if post.published, {
        key: {
          text: "Content"
        },
        value: {
          text: post.content | string | markdown
        }
      } if post.content, {
        key: {
          text: "Properties"
        },
        value: {
          text: propertiesHtml
        }
      }]
    }) }}
  {% endfor %}
{% endblock %}