{% extends "form.njk" %}

{% block fieldset %}
  {% for post in posts %}
    {%- set propertiesHtml %}<dl>{% for name, value in post.properties -%}
    {% if (name != "name") and (name != "url") and (name != "content") and (name != "published") %}
      <dt><code class="property">{{ name }}</code></dt>
      <dd>{{ value }}</dd>
    {% endif %}
    {%- endfor %}</dl>{% endset -%}
    {{ summary({
      title: post.properties.name,
      actions: [
        {
          href: post.properties.url,
          text: "View",
          visuallyHiddenText: post.properties.name
        }
      ],
      rows: [{
        key: {
          text: "Published"
        },
        value: {
          text: (post.properties.published | date("PPPppp", application.locale))
        }
      } if post.properties.published, {
        key: {
          text: "Content"
        },
        value: {
          text: post.properties.content | string | markdown
        }
      } if post.properties.content, {
        key: {
          text: "Properties"
        },
        value: {
          text: propertiesHtml
        }
      }, {
        key: {
          text: "Type"
        },
        value: {
          text: "<code>" + post.type + "</code>"
        }
      } if post.type]
    }) }}
  {% endfor %}
{% endblock %}