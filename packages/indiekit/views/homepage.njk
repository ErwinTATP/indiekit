{% extends "document.njk" %}

{% block content %}
  {%- set postTypesHtml %}{% for config in publication.config["post-types"] %}
    <a href="https://indieweb.org/{{ config.type }}">{{ icon(config.type) }} {{ config.name }}</a>{{ '' if loop.last else ', ' }}
  {%- endfor %}{% endset %}

  {%- set syndicateToHtml %}{% for target in publication.config["syndicate-to"] %}
    <a href="{{ target.uid }}">{{ target.name }}</a>{{ '' if loop.last else ', ' }}
  {%- endfor %}{% endset %}

  {{ summary({
    title: "Micropub",
    rows: [{
      key: {
        text: "Supported post types"
      },
      value: {
        text: postTypesHtml | indent(2)
      }
    } if publication.config["post-types"].length > 0, {
      key: {
        text: "Syndication targets"
      },
      value: {
        text: syndicateToHtml | indent(2)
      }
    } if publication.config["syndicate-to"].length > 0, {
      key: {
        text: "Media endpoint"
      },
      value: {
        text: publication.config["media-endpoint"]
      }
    } if publication.config["media-endpoint"]]
  }) }}
{% endblock %}