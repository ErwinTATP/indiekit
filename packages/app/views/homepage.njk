{% extends "document.njk" %}

{% block content %}
  {%- set postTypesHtml %}{% for config in config["post-types"] %}
    <a href="https://indieweb.org/{{ config.type }}">{{ config.name }}</a>{{ '' if loop.last else ', ' }}
  {%- endfor %}{% endset %}

  {%- set syndicateToHtml %}{% for target in config["syndicate-to"] %}
    <a href="{{ target.uid }}">{{ target.name }}</a>{{ '' if loop.last else ', ' }}
  {%- endfor %}{% endset %}

  {{ summary({
    title: "Micropub",
    rows: [{
      key: {
        text: "Supported post types"
      },
      value: {
        text: postTypesHtml | indent(2)
      }
    } if config["post-types"].length > 0, {
      key: {
        text: "Syndication targets"
      },
      value: {
        text: syndicateToHtml | indent(2)
      }
    } if config["syndicate-to"].length > 0, {
      key: {
        text: "Media endpoint"
      },
      value: {
        text: config["media-endpoint"]
      }
    } if config["media-endpoint"]]
  }) }}
{% endblock %}